{% extends 'base.html' %}

{% block content %}
<br>
{% if user.is_authenticated %}

<div>
  <h4  id="welcome-name" class="center">Welcome back, <a href="">{{user.profile.first_name}}!</a></h4>
</div>
<br>
{% else %}
<div>
  <h4  id="welcome-name" class="center">Welcome to Market Urself</a></h4>
</div>
<br>
{% endif %}

<h4>Featured Table</h4>
<div>
  <p class="divider"></p>
</div>
<div class="row">
  <div class="container">
    {% if featured_table %}
    <div class="col s6">
      <div class="card large">
        <div class="card-image">
          <img src="/media/{{featured_table.image}}">
        </div>
        <div class="card-content">
        <div class="card-title center">
          <h4>{{featured_table}}</h4>
          <p class="divider"></p>
          <p>{{featured_table.table_category}}</p>
          </div>
          <p class="divider"></p>
          <p>{{featured_table.table_description|truncatechars:30}}</p>
          <p class="divider"></p>
          <a class="" href="/tables/{{featured_table.id}}">more</a>
          |
          <a class="" href="/tables/{{featured_table.user.profile.id}}">profile</a>

        </div>
      </div>
    </div>
    {% endif %}
    {% if featured_table %}
    
    {% if items %}
    {% for item in items|slice:":4" %}
    <div class="row">
      <div class="col s6 m3">
            <a href="/items/{{item.id}}">
              <div class="card small hoverable">
                <div class="card-image">
                  {% if item.image %}
                  <img src="/media/{{item.image}}" height="150" width="150">
                  {% else %}
                  <img src="https://via.placeholder.com/150" height="150" width="150">
                  {% endif %}
                </div>
                  <div class="card-content left">
                    <p>{{item.item_name}}</p>
                    <p>${{item.item_price}}</p>
                    <p>{{item.item_description}}</p>
                </div>
              </div>
            </a>
      </div>
        {% endfor %}
        {% else %}
        <div class="card square">
          <div class="card-image">
            <div class="card-content center-align">
              <p>No Items to Display</p>
            </div>
          </div>
        </div>
      </div>
      {% endif %}
    </div>
    {% endif %}
  </div>
</div>


<h4>Find your local favorites!</h4>


<div>
  <p class="divider"></p>
</div>

<div class="container">
  {% if items %}
  {% for item in items|slice:":24" %}
  <div class="row">
    <div class="col s6 m3">
          <a href="/items/{{item.id}}">
            <div class="card small hoverable">
              <div class="card-image">
                {% if item.image %}
                <img src="/media/{{item.image}}" height="150" width="150">
                {% else %}
                <img src="https://via.placeholder.com/150" height="150" width="150">
                {% endif %}
              </div>
                <div class="card-content left">
                  <p>{{item.item_name}}</p>
                  <p>${{item.item_price}}</p>
                  <p>{{item.item_description}}</p>
              </div>
            </div>
          </a>
    </div>
        {% endfor %}
        {% else %}
        <div class="card square">
          <div class="card-image">
            <div class="card-content center-align">
              <p>No Items to Display</p>
            </div>
          </div>
        </div>
      </div>
      {% endif %}
  </div>

  
  <div>
    <p class="divider"></p>
  </div>

{% endblock %}